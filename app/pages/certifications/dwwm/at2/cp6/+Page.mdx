---
title: CP 6 - DÃ©velopper des composants d'accÃ¨s aux donnÃ©es SQL et NoSQL
description: SynthÃ¨se et explications des attentes relatives Ã  la compÃ©tence professionnelle 6 du titre professionnel DÃ©veloppeur Web et Web Mobile (DWWM-01280m04).
tags: [DWWM]
---

import Callout from "@/components/Callout";

## ğŸ“š RÃ©fÃ©rences

- REAC _(mise Ã  jour du 02/07/2024)_, pages 25 et 26
- RE _(mise Ã  jour du 02/07/2024)_, page 11

## ğŸ“‹ En rÃ©sumÃ©

Gros morceau la crÃ©ation de bases de donnÃ©es, n'est-ce pas ? ğŸ˜…  
On va pouvoir souffler un coup en parlant maintenant de l'accÃ¨s Ã  ces bases de donnÃ©es. _(enfin, souffler... pas trop quand mÃªme)_

Et tu sais quoi, comme tout ce qu'on a vu jusqu'Ã  maintenant, on va allÃ©ger un peu les choses en parlant de merveilleux outils comme les **ORM** et les **ODM** !

<Callout type="question" title="C'est quoi un ORM et ODM ? Quelles sont les diffÃ©rences ?">
  Les ORM _(Object-Relational Mapping)_ et les ODM _(Object-Document Mapper)_ sont des outils qui permettent de faire le lien entre les bases de donnÃ©es et les langages de programmation.

  - Les ORM sont utilisÃ©s pour les bases de donnÃ©es relationnelles, comme MySQL, PostgreSQL ou SQLite. Ils permettent de manipuler les donnÃ©es de la base de donnÃ©es sous forme d'objets, ce qui facilite leur utilisation dans le code.
  - Les ODM sont utilisÃ©s pour les bases de donnÃ©es NoSQL, comme MongoDB. Ils fonctionnent de la mÃªme maniÃ¨re que les ORM, mais pour les bases de donnÃ©es NoSQL.

  En gros, les ORM et les ODM permettent de simplifier la manipulation des donnÃ©es dans le code, en Ã©vitant d'avoir Ã  Ã©crire des requÃªtes Ã  la main.
</Callout>

Alleeeez, on va voir Ã§a de plus prÃ¨s ! ğŸ˜

## âš™ï¸ Utilisation d'un ORM ou d'un ODM

<Callout type="question" title="Je fais mes requÃªtes SQL Ã  la main, il faut que j'apprenne Ã  utiliser un ORM/ODM ?">
  **Non** ! _(enfin, pas pour passer la certification en tout cas)_  
  D'un certain cÃ´tÃ©, c'est nettement plus intÃ©ressant de savoir rÃ©aliser les requÃªtes par toi-mÃªme, sans utiliser d'outils qui gÃ©nÃ¨rent du SQL Ã  ta place.

  En entreprise, tu vas certainement utiliser ces fameux outils, mais dÃ¨s que l'on va chercher Ã  avoir les requÃªtes les plus optimisÃ©es possibles, il va falloir mettre les mains dans le cambouis !
</Callout>

Mais alors, pourquoi faire des requÃªtes Ã  la main quand on peut utiliser un ORM ou un ODM ?  
Eh bien, c'est simple : les ORM et les ODM te permettent de manipuler les donnÃ©es de la base de donnÃ©es sous forme d'objets, ce qui est beaucoup plus pratique et lisible dans le code.

Tu peux crÃ©er, lire, mettre Ã  jour et supprimer des donnÃ©es sans avoir Ã  Ã©crire de requÃªtes SQL ou NoSQL.

Cependant Ã§a vient aussi avec son lot de contraintes et de limitations...

Un ORM ou un ODM ne va pas forcÃ©ment te permettre de faire tout ce que tu veux et dans certains cas, tu vas devoir Ã©crire des requÃªtes SQL ou NoSQL Ã  la main.  
D'autre part, ces outils peuvent aussi avoir un impact sur les performances de ton application, surtout si tu fais des requÃªtes complexes ou si tu manipules de grandes quantitÃ©s de donnÃ©es.

Imagines un peu si tu rÃ©alises une application qui doit gÃ©rer des tonnes de donnÃ©es en temps rÃ©el, comme une application de spÃ©culation boursiÃ¨re ğŸ˜…

<Callout type="warning" title="Les ORM et ODM, c'est cool, mais pas magique">
  Si tu comptes prÃ©senter un projet avec un ORM ou un ODM, il va falloir que tu sois capable de justifier tes choix techniques et de montrer que tu sais ce que tu fais... et ce que fait l'outil que tu utilises !

  Tu dois Ãªtre capable de rÃ©pondre Ã  des questions comme celle-ci :

  > Quelle est la requÃªte SQL gÃ©nÃ©rÃ©e par l'ORM/ODM pour cette opÃ©ration ?

  Ton jury ne cherchera pas Ã  te piÃ©ger, mais il attend de toi que tu sois capable de comprendre ce que tu fais et pourquoi tu le fais.
</Callout>

## ğŸ” IntÃ©gritÃ© des donnÃ©es

L'intÃ©gritÃ© des donnÃ©es, c'est le fait de garantir que les donnÃ©es stockÃ©es dans la base de donnÃ©es sont correctes et cohÃ©rentes, de la crÃ©ation jusqu'Ã  la suppression.
Si dans un champ de ta base de donnÃ©es tu attends un nombre entier, tu ne vas pas accepter une chaÃ®ne de caractÃ¨res, n'est-ce pas ?

Et pour garantir cette intÃ©gritÃ©, on va mettre en place des vÃ©rifications **avant** d'insÃ©rer ou de mettre Ã  jour des donnÃ©es dans la base de donnÃ©es.

Rien de plus simple bien entendu !

Tu t'attends Ã  avoir une adresse email dans un champ ?  
Alors tu vas vÃ©rifier que l'adresse email est bien une adresse email, et non pas une chaÃ®ne de caractÃ¨res lambda.

## ğŸ” ConfidentialitÃ© des donnÃ©es

La plupart du temps, nos bases de donnÃ©es vont accueillir des donnÃ©es confidentielles, comme :

- Des mots de passe
- Des informations personnelles _(nom, prÃ©nom, adresse, etc.)_
- Des donnÃ©es sensibles _(informations bancaires, mÃ©dicales, etc.)_

Bien que notre bases de donnÃ©es se doit d'Ãªtre sÃ©curisÃ©e dans son accÃ¨s et ses permissions, dans le cas d'une fuite il est important de sÃ©curiser ces donnÃ©es.

Pour les mots de passe, on va les hacher avant de les stocker dans la base de donnÃ©es.

<Callout type="question" title="C'est quoi le hachage ?">
  Le hachage est une maniÃ¨re de sÃ©curiser un contenu textuel en le transformant en une chaÃ®ne de caractÃ¨res "alÃ©atoire", appelÃ©e **hash**.

  Il est important de noter que le hachage est **unidirectionnel**, c'est-Ã -dire qu'il est impossible de retrouver la valeur d'origine Ã  partir de son hash contrairement au **chiffrement**.
</Callout>

<Callout type="question" title="Et le chiffrement, Ã§a sert Ã  quoi ?">
  Comme le hachage, le chiffrement permet de sÃ©curiser des donnÃ©es. Cependant : le chiffrement est **bidirectionnel**.  
  C'est Ã  dire que l'on peut retrouver les donnÃ©es d'origine Ã  partir des donnÃ©es chiffrÃ©es.

  Si tu as dÃ©jÃ  eu l'occasion d'envoyer des "messages codÃ©s", c'est que tu as dÃ©jÃ  utilisÃ© le chiffrement sans pour autant le savoir !
  L'un des chiffrements les plus connus est le **chiffre de CÃ©sar**, qui consiste Ã  dÃ©caler les lettres de l'alphabet d'un certain nombre de positions.

  Par exemple :

  > Message : "Bonjour"
  > DÃ©calage : 3
  >
  > Message chiffrÃ© : "Erqmruxu"

  <Callout type="warning" title="Attention !">
    Le chiffrement n'est pas une solution de sÃ©curitÃ© absolue, il est possible de retrouver les donnÃ©es d'origine Ã  partir des donnÃ©es chiffrÃ©es.  
    D'ailleurs le chiffre de CÃ©sar est un chiffrement trÃ¨s simple Ã  casser, on ne va donc pas l'utiliser pour protÃ©ger les donnÃ©es sensibles !
  </Callout>

  On va privilÃ©gier un algorithme de chiffrement qui se base sur une **clÃ© secrÃ¨te**, qui sera la clÃ© pour chiffrer et dÃ©chiffrer les donnÃ©es.  
  C'est d'ailleurs plus ou moins ce qui est fait avec la cÃ©lÃ¨bre [machine Enigma](<https://fr.wikipedia.org/wiki/Enigma_(machine)>) utilisÃ©e par les allemands pendant la Seconde Guerre Mondiale pour chiffrer leurs messages et Ã©viter qu'ils soient interceptÃ©s et compris par les alliÃ©s.

</Callout>

Mais alors, comment on peut s'y prendre ?

ğŸ¥ğŸ¥ğŸ¥

Avec des bibliothÃ¨ques, tout simplement ! ğŸ™ƒ  
_(Ou si tu es un peu fou, tu peux essayer de le faire toi-mÃªme, mais attention Ã  ce que ce soit **rÃ©ellement sÃ©curisÃ©** sinon tu en deviens le seul et unique **responsable**)_

Tu as notamment des bibliothÃ¨ques _(Node.js)_ qui sont trÃ¨s utilisÃ©es :

- Hachage : `bcrypt` _(ou encore `argon2`)_
- Chiffrement : `crypto` _(module natif de Node.js en plus, si Ã§a c'est pas la classe ğŸ˜)_

Je te laisse te plonger dans les documentations associÃ©es, que tu retrouveras _(presque)_ tout en bas de cette fiche.

Et naturellement : **PERSONNE** ne doit avoir accÃ¨s Ã  ces donnÃ©es, Ã  part les personnes autorisÃ©es/concernÃ©es bien entendu.

## ğŸ¯ CritÃ¨res d'Ã©valuation

- Les traitements relatifs aux manipulations des donnÃ©es rÃ©pondent aux fonctionnalitÃ©s dÃ©crites dans le dossier de conception
- L'intÃ©gritÃ© et la confidentialitÃ© des donnÃ©es sont maintenues
- Les cas d'exception sont pris en compte
- Toutes les entrÃ©es sont contrÃ´lÃ©es et validÃ©es dans les composants serveurs sÃ©curisÃ©s
- Les tests unitaires et de sÃ©curitÃ© sont associÃ©s Ã  chaque composant
- La dÃ©marche structurÃ©e de rÃ©solution de problÃ¨me est adaptÃ©e en cas de dysfonctionnement
- Le systÃ¨me de veille permet de suivre les Ã©volutions technologiques et les problÃ©matiques de sÃ©curitÃ© liÃ©es aux bases de donnÃ©es SQL et NoSQL

## ğŸ¤¯ Aller plus loin

T'es encore lÃ  ? Tu aimes Ã§a les ~patates~ bases de donnÃ©es, hein ? ğŸ˜  
Alors dans ce cas, je te recommande chaudement de te pencher sur PostgreSQL qui est, Ã  mon sens, l'une des seules **vraies** bases de donnÃ©es relationnelles.

Je ne m'Ã©talerai pas sur ce sujet, mais dÃ©solÃ© MySQL/MariaDB de ne pas Ãªtre au niveau... ğŸ˜…

Les ressources que je m'apprÃªte Ã  te recommander sont un peu plus avancÃ©es, mais ce sont d'excellentes portes d'entrÃ©es vers des mÃ©tiers comme DBA par exemple.
Tu retrouveras des notions trÃ¨s bien expliquÃ©es et pertinentes pour t'amÃ©liorer sur le sujet dans les ressources de [Dalibo](https://www.dalibo.com/formations).

<Callout type="note" title="GratuitÃ© des formations Dalibo">
  Dalibo propose des formations, mais qui ne sont pas gratuites pour autant.  
  Seuls les supports de cours sont disponibles gratuitement, aux formats EPUB et PDF.

  Tu peux retrouver ces supports sur la page [Formations](https://www.dalibo.com/formations) du site de Dalibo.
</Callout>

## ğŸ§  Documentations

- [SQL.sh - Cours et tutoriels SQL](https://sql.sh/)
- [Dalibo - Formations](https://www.dalibo.com/formations)
- [WikipÃ©dia - Chiffrement de CÃ©sar](https://fr.wikipedia.org/wiki/Chiffrement_par_d%C3%A9calage)
- [bcrypt - Documentation](https://www.npmjs.com/package/bcrypt)
- [argon2 - Documentation](https://www.npmjs.com/package/argon2)
- [crypto - Documentation](https://nodejs.org/api/crypto.html)
