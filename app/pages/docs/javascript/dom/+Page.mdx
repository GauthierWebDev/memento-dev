---
title: La manipulation du DOM avec JavaScript
description: D√©couvrez comment ma√Ætriser le DOM en JavaScript et donnez vie √† vos pages web !
tags: []
---

import QuickLinks from "@/components/QuickLinks";
import Callout from "@/components/Callout";
import tabs from "./tabs";

Maintenant que nous avons vu les grandes lignes du langage JavaScript, tu vas enfin pouvoir entrer dans le vif du sujet : la **manipulation du DOM** avec JavaScript.

## ü§î Qu'est-ce que le DOM ?

Le **Document Object Model** _(ou **DOM** pour faire plus court)_ est une interface de programmation pour les documents HTML et XML. Il permet de repr√©senter la page web comme un arbre de **n≈ìuds**.

Chaque √©l√©ment HTML est un n≈ìud dans l'arbre, et les n≈ìuds peuvent contenir d'autres n≈ìuds.  
Mais un n≈ìud peut aussi √™tre un **texte** ou une **propri√©t√©** d'un √©l√©ment !

Pour que ce soit plus facile √† comprendre, voici quelques analogies pour t'aider √† comprendre ce qu'est le DOM.

<tabs.jsDomExplanations />

## ü§ñ Manipulation du DOM

La manipulation du DOM avec JavaScript permet de modifier la structure et le contenu de la page web.  
Le grand avantage du DOM est qu'il est **tr√®s rapide** √† manipuler, et que c'est **tr√®s simple** √† comprendre.

Mais pour le manipuler, il faut d'abord **s√©lectionner** les √©l√©ments que l'on veut modifier.

### üîç S√©lectionner un √©l√©ment

Pour s√©lectionner un √©l√©ment, on peut utiliser plusieurs m√©thodes :

- `document.getElementById(id)` : S√©lectionne un √©l√©ment par son `id` _(propri√©t√© HTML `id`)_.
- `document.getElementsByClassName(className)` : S√©lectionne tous les √©l√©ments par leur `className` _(propri√©t√© HTML `class`)_.
- `document.getElementsByTagName(tagName)` : S√©lectionne tous les √©l√©ments par leur `tagName` _(balise HTML)_.
- `document.querySelector(selector)` : S√©lectionne le premier √©l√©ment qui correspond au `selector` _(s√©lecteur CSS)_.
- `document.querySelectorAll(selector)` : S√©lectionne tous les √©l√©ments qui correspondent au `selector` _(s√©lecteur CSS)_.

Voici quelques exemples comment√©s pour visualiser ces m√©thodes :

<tabs.jsDomSelectionExplanations />

Selon la m√©thode utilis√©e, on peut r√©cup√©rer un √©l√©ment ou une liste d'√©l√©ments.  
Pour m√©moriser ces m√©thodes, fais attention √† la pr√©sence du pluriel dans le nom de la m√©thode :

- `getElementById` _(singulier)_ : Retourne un √©l√©ment.
- `getElementsByClassName` _(pluriel)_ : Retourne une liste d'√©l√©ments.
- `getElementsByTagName` _(pluriel)_ : Retourne une liste d'√©l√©ments.
- `querySelector` _(singulier)_ : Retourne un √©l√©ment.
- `querySelectorAll` _(pluriel)_ : Retourne une liste d'√©l√©ments.

<Callout type="note" title="Aucun √©l√©ment trouv√©">
  Si aucun √©l√©ment n'est trouv√©, la m√©thode retourne `null`.  

  Cependant, si on utilise une m√©thode qui retourne une liste d'√©l√©ments, la liste ne sera pas `null`, mais **vide**.
</Callout>

### ‚úèÔ∏è Modifier le contenu d'un √©l√©ment

Pour modifier le contenu d'un √©l√©ment, on retrouve trois propri√©t√©s :

- `element.innerHTML` : Modifie le contenu HTML de l'√©l√©ment.
- `element.innerText` : Modifie le contenu texte de l'√©l√©ment.
- `element.textContent` : Modifie le contenu texte de l'√©l√©ment.

Voici quelques exemples comment√©s pour visualiser ces propri√©t√©s :

<tabs.jsDomContentModificationExplanations />

<Callout type="question" title="Je ne comprends pas la diff√©rence entre innerText et textContent">
  Si √ßa te rassure, c'est normal ! Ces deux propri√©t√©s sont tr√®s similaires, mais n'ont pas les m√™mes comportements.

  - `innerText` : Modifie le contenu texte de l'√©l√©ment, et ignore les balises HTML.
  - `textContent` : Modifie le contenu texte de l'√©l√©ment, et prend en compte les balises HTML.
</Callout>

<Callout type="warning" title="Attention √† innerHTML">
  La propri√©t√© `innerHTML` est tr√®s puissante, mais elle peut √©galement √™tre dangereuse.

  En l'utilisant, on expose la page √† des attaques de type **XSS** _(Cross-Site Scripting)_ !  
  Il est donc **fortement conseill√©** d'utiliser `textContent` ou `innerText` plut√¥t que `innerHTML`.

  Dans le cas o√π l'on doit utiliser `innerHTML`, il est **fortement conseill√©** de **sanitiser** le contenu avant de l'afficher.
</Callout>
  
Je ne vais pas rentrer dans les d√©tails ici, mais tu peux en savoir plus sur ces deux propri√©t√©s dans la documentation de MDN :

<QuickLinks>
  <QuickLinks.QuickLink
    title="MDN - innerText"
    href="https://developer.mozilla.org/fr/docs/Web/API/HTMLElement/innerText"
    description="Documentation de MDN sur la propri√©t√© innerText"
    icon="presets"
  />
  <QuickLinks.QuickLink
    title="MDN - textContent"
    href="https://developer.mozilla.org/fr/docs/Web/API/Node/textContent"
    description="Documentation de MDN sur la propri√©t√© textContent"
    icon="presets"
  />
  <QuickLinks.QuickLink
    title="MDN - innerHTML"
    href="https://developer.mozilla.org/fr/docs/Web/API/Element/innerHTML"
    description="Documentation de MDN sur la propri√©t√© innerHTML"
    icon="presets"
  />
  <QuickLinks.QuickLink
    title="MDN - Cross-Site Scripting"
    href="https://developer.mozilla.org/fr/docs/Glossary/Cross-site_scripting"
    description="Documentation de MDN sur le Cross-Site Scripting"
    icon="presets"
  />
</QuickLinks>

### üîß Modifier les attributs d'un √©l√©ment

On a eu l'occasion de voir comment modifier le contenu d'un √©l√©ment, mais on peut √©galement modifier ses attributs.  
Pour modifier les attributs d'un √©l√©ment, on peut utiliser la m√©thode `element.setAttribute(attribute, value)`.

Mais avant d'aller plus loin...

<Callout type="question" title="C'est quoi un attribut ?">
  Un attribut est une propri√©t√© d'un √©l√©ment HTML.

  Par exemple, l'attribut `src` d'une balise `<img>` est la source de l'image.  
</Callout>

En conservant l'exemple de l'image, on peut modifier son attribut `src` pour changer l'image affich√©e.

<tabs.jsDomAttributesModificationExplanations />

Si maintenant on souhaite supprimer un attribut, on aura une m√©thode similaire : `element.removeAttribute(attribute)`.

<tabs.jsDomAttributesDeletionExplanations />

D'autres variantes existent pour manipuler les attributs d'un √©l√©ment :

- `element.hasAttribute(attribute)` : V√©rifie si l'√©l√©ment a un attribut.
- `element.getAttribute(attribute)` : R√©cup√®re la valeur d'un attribut.
- `element.toggleAttribute(attribute, value)` : Ajoute ou supprime un attribut.

<tabs.jsDomAttributesVerificationExplanations />

Et en r√©alit√©, c'est √† peu pr√®s tout pour la modification des attributs d'un √©l√©ment !  
Avec une exception pour...

### üîÑ Modifier les classes d'un √©l√©ment

Pour modifier les classes d'un √©l√©ment, on n'utilise pas la m√©thode `element.setAttribute()`, mais plut√¥t les m√©thodes pr√©sentes dans la propri√©t√© `element.classList`.

`element.classList` est une propri√©t√© qui contient une liste de classes de l'√©l√©ment _(en lecteur seule, impossible de modifier directement la liste)_, mais qui a √©galement des m√©thodes pour les manipuler.

Les fameuses m√©thodes sont :

- `element.classList.add(className)` : Ajoute une classe √† l'√©l√©ment.
- `element.classList.remove(className)` : Supprime une classe de l'√©l√©ment.
- `element.classList.toggle(className)` : Ajoute ou supprime une classe de l'√©l√©ment.
- `element.classList.contains(className)` : V√©rifie si l'√©l√©ment a une classe.

<tabs.jsDomClassesModificationExplanations />

Plut√¥t simple √† utiliser, non ? üòè

### üé® Modifier les styles d'un √©l√©ment

Maintenant que l'on sait comment modifier le contenu d'un √©l√©ment, ses attributs et ses classes, on peut se pencher sur les styles.

Comme pour les classes, on n'utilise pas la m√©thode `element.setAttribute()`.  
On va plut√¥t utiliser la propri√©t√© `element.style` pour modifier les styles d'un √©l√©ment.

`element.style` est une propri√©t√© qui contient un objet de styles de l'√©l√©ment _(en lecteur seule, impossible de modifier directement l'objet)_, mais qui a √©galement des m√©thodes pour les manipuler.

On retrouve les m√©thodes suivantes :

- `element.style.setProperty(property, value)` : Modifie la valeur d'un style.
- `element.style.getPropertyValue(property)` : R√©cup√®re la valeur d'un style.
- `element.style.removeProperty(property)` : Supprime un style.

<tabs.jsDomStylesModificationExplanations />

Ici encore, on reste sur de l'utilisation relativement simple !

<Callout type="warning" title="Attention √† la modification des styles inline">
  Les styles inline sont des styles qui sont appliqu√©s directement √† l'√©l√©ment dans le code HTML.

  Ils sont tr√®s pratiques pour des cas tr√®s sp√©cifiques, mais il faut **bien comprendre** qu'ils sont **prioritaires** par rapport aux autres styles.  
  Il est pr√©f√©rable d'utiliser autant que possible les classes CSS pour modifier les styles d'un √©l√©ment.

  Cependant, il est parfois n√©cessaire d'utiliser les styles inline pour des raisons de personnalisation.  
  C'est notamment le cas pour la mise en place de variables CSS dynamiques, ou pour des cas tr√®s sp√©cifiques !
</Callout>

### üî® Cr√©er un √©l√©ment

Personnaliser des √©l√©ments c'est top, mais les cr√©er c'est encore mieux !

<Callout type="note" title="Les frameworks JavaScript front-end">
  Avant m√™me de te montrer comment √ßa marche, laisse moi te dire que c'est le principe utilis√© par de nombreux frameworks et biblioth√®ques JavaScript front-end pour cr√©er des interfaces utilisateurs.

  Pour citer les plus connus, on retrouve :

  - [React](https://react.dev/)
  - [Vue.js](https://vuejs.org/)
  - [Angular](https://angular.io/)
  - [Svelte](https://svelte.dev/)
  - [Solid](https://www.solidjs.com/)

  On garde ce sujet pour une prochaine fois, d'autant plus que ces outils n√©cessitent une compr√©hension plus approfondie des concepts JavaScript.
</Callout>

Mais alors, sous le capot, que font ces outils ?

Pour cr√©er un √©l√©ment, on peut utiliser la m√©thode `document.createElement(tagName)`.  
Cette m√©thode fonctionne de la m√™me mani√®re que les m√©thodes de s√©lection d'√©l√©ments que l'on a vu pr√©c√©demment.

Elle prend en param√®tre le nom de la balise HTML de l'√©l√©ment √† cr√©er et retourne un objet repr√©sentant l'√©l√©ment cr√©√©.

<tabs.jsDomCreationExplanations />

Une fois l'√©l√©ment cr√©√©, on peut l'ajouter √† la page en utilisant la m√©thode `appendChild(element)`.

<tabs.jsDomAppendChildExplanations />

Il existe plusieurs m√©thodes pour ajouter un √©l√©ment √† la page :

- `appendChild(element)` : Ajoute un √©l√©ment √† la fin de l'√©l√©ment parent.
- `append(element1, element2, ...)` : Ajoute un ou plusieurs √©l√©ments √† la fin de l'√©l√©ment parent.
- `prepend(element)` : Ajoute un √©l√©ment au d√©but de l'√©l√©ment parent.
- `insertBefore(newElement, existingElement)` : Ajoute un √©l√©ment avant un √©l√©ment existant.
- `insertAdjacentHTML(position, html)` : Ins√®re du HTML √† une position donn√©e.
- `insertAdjacentText(position, text)` : Ins√®re du texte √† une position donn√©e.
- `insertAdjacentElement(position, element)` : Ins√®re un √©l√©ment √† une position donn√©e.
- `replaceChild(newElement, oldElement)` : Remplace un √©l√©ment par un autre.

Comme tu peux le voir, tu as plusieurs choix qui s'ouvrent √† toi !  
√Ä toi de choisir la m√©thode qui te convient le mieux, en fonction de ce que tu veux faire üòâ

## ü§ù Conclusion

Allez, on s'arr√™te l√† pour aujourd'hui !

Mais avec toutes ces propri√©t√©s et m√©thodes, tu as de quoi manipuler le DOM comme un pro ! üòé  
Tu peux aller encore plus loin en utilisant des **√©v√©nements** pour r√©agir √† des actions de l'utilisateur, ou encore des **observateurs** pour surveiller les modifications d'un √©l√©ment.

Mais c'est un autre sujet, que l'on verra dans la prochaine partie !

En attendant, n'h√©site pas √† t'exercer en cr√©ant des pages web avec JavaScript ! üòä
